[{"content":"Задача Спроектировать сервис со следующими свойствами:\nобмен между фронтендом и прикладной логикой может осуществляеться через шину доступный извне АПИ и структура обмена данными документируются программно клиенты могут работать по протоколам SOAP, JSON, Websockets сервис поддерживает метрики (prometheus) и трассировку (jaeger) Технические особенности решения Формат описания сервиса: protobuf Шина: nats-streaming Базовый протокол взаимодействия: gRPC Структура сервиса Компоненты сервиса Внешние интерфейсы HTML Frontend - страницы вебсайта JSON API / Swagger - доступ к АПИ для собственного и клиентского javascript, см. grpc-gateway WebSocket - работа в режиме \u0026ldquo;1 соединение - 1 запрос\u0026rdquo; позволяет использовать документацию JSON API, см. также - grpc-websocket-proxy SOAP - gRPC proxy + генерация WSDL, см. soap-proxy Генерируемый код JSON proxy - конвертация запросов JSON в gRPC WS proxy - конвертирует (на лету) запросы по протоколу ws в JSON API SOAP proxy - WSDL + конвертация SOAP-запросов в запросы gRPC gRPC Server - сервис получает gRPC запросы и передает их в соответствующий gRPC handler MQ Client - заменяет gRPC handler и передает запросы в MQ MQ handler - получает запросы из MQ и передает их в соответствующий gRPC handler [docs.proto.html] - документация по файлу main.proto, см. protoc-gen-doc Используемое ПО PG - Postgresql - СУБД, которая неизбежно будет использоваться как минимум до миграции всего старого кода MQ (RPC, pub/sub) - шина с поддержкой RPC и pub/sub, для которой есть библиотеки интеграции с gRPC, например NATS и AMQP. Я начинал с Rabbit, но в конфигурации по умолчанию он даже при бездействии давал избыточную нагрузку на CPU, поэтому дальнейшая разработка велась с nats-streaming. Однако, даже в первом приближении есть альтернативы Trace server (Jaeger) - тут не будет привязки к конкретной реализации, т.к. jaeger использует opentracing Универсальный код собственной разработки Template renderer - формирование html из шаблонов с возможностью вызова методов gRPC PG NOTIFY -\u0026gt; gRPC Message proxy - конверсия событий PG по заданному .proto и передача (publish) их в NATS Код, реализующий конкретный сервис service.proto - спецификация конкретного сервиса, для сервисов, основанных на прикладной логике в хранимом коде БД, в перспективе может генерироваться по описаниям функций Postgresql [Templates] - HTML-разметка страниц web-интерфейса с данными, полученными из вызовов gRPC-методов gRPC Handler - прикладная логика сервиса PG client - методы, вызывающие хранимый код, в перспективе могут генерироваться по описаниям функций Postgresql Пилотная версия [Демо-сайт] Исходный код прототипа Библиотеки общего назначения Генераторы proxy Комментарии к выбранным технологиям RPC Главная цель проектируемого решения - избавиться от устаревших (CGI / SUXX / mod_perl) технологий и построить работу на новом стеке, чтобы можно было переделывать подсистемы в предсказуемые сроки (без реверс-инжиниринга) и набирать под этот стек персонал. Один из трех используемых в текущей системе фреймворков (PGWS, в продакшене с 2010г) основан на RPC. Если мы перенесем на RPC остальной код, цель уже можно считать, в целом, достигнутой. Дополнительно, новое решение, будучи близким к PGWS, позволит использовать уже проверенные практикой решения с минимальными изменениями.\nProtobuf Протокол сериализации (передачи) структурированных данных от Google, доступный c 2008г. На текущий момент этот протокол продолжает развиваться и можно предположить, что для наших задач он уже вполне готов.\nВыбор этого протокола для межсервисного обмена позволяет\nразрабатывать клиентскую и серверную часть параллельно после готовности .proto файла на этапе компиляции выявлять ошибки, связанные с межсервисным взаимодействием релизить новую версию сервиса без модификации клиентов gRPC Уровень текущей поддержки стандарта gRPC сообществом позволяет избежать затрат на собственную реализацию (как минимум, в первом приближении) интерфейсов для клиентов, обмена по шине и прочих некритичных для прикладных задач вопросов\nMQ-RPC Взаимодействие между фронтендом и прикладной логикой через шину позволяет в процессе эксплуатации без участия разработчиков менять соотношение \u0026ldquo;фронтенды:обработчики\u0026rdquo; для нагруженных сервисов. Реализация MQ-клиента с сигнатурой gRPC-обработчика позволяет, для ненагруженных сервисов, убрать MQ из цепочки и вызывать gRPC-обработчик непосредственно из gRPC-сервера (красная стрелка \u0026ldquo;Вариант без MQ RPC\u0026rdquo; на схеме). Т.е. такой вариант использования шины не добавляет ее в число зависимостей. Gateway (Hub) и масштабирование Вопросы маршрутизации и масштабирования сервисов не требуют проработки на первом этапе, т.к. планируется иметь несколько точек масштабирования (далее - ТМ) и будет использовано стороннее ПО. Первично ситуация видится такой:\nКаждый сервис (версия сервиса) обслуживает некоторый адрес ://host/prefix Клиенты обращаются по этому адресу по протоколу http/https/ws[/gRPC] (ТМ-1) Маппинг запроса на исполнителя (или пул исполнителей) осуществляется сторонним ПО (nginx/traefik/HAproxy) (ТМ-2) Отправленный в MQ запрос может попадать к одному из нескольких обработчиков, при этом один это будет сервер или несколько - определяется функционалом MQ (ТМ-3) Отправленный в БД запрос может направляться к одному из шардов (одной из реплик) БД Swagger (openapi) Выбран потому, что это - один из стандартных способов построения интерфейсов для HTTP клиентов (любых, не только javascript) и позволяет встроить вызов АПИ даже без использования каких-либо фреймворков (пример вызова: curl -X POST http://localhost:8081/v1/sample/ping)\nПо аналогичным причинам не был выбран Google gRPC-Web - на клиенте необходима js-библиотека и на сервере - envoy/nginx. В прототипе этапа 1 клиентский код работы через websockets - 89 строк без зависимостей.\nSOAP У нас есть клиенты, для которых этот интерфейс востребован и они пока не позволяют нам от него отказаться. В текущей версии ТПро этот функционал реализован в PGWS как прокси к JSON API. В новой архитектуре предложено аналогичное решение (т.е. его тоже не надо колировать) с тем отличием, что WSDL теперь генерится программно, а не руками, как в PGWS\nTrace server (Jaeger) Целесообразность собрать в одном месте журналы и тайминги всех подсистем, участвующих в обработке клиентских запросов, очевидна изначально. Раньше у нас не было такого места, сейчас есть такие решения, как jaeger, и логично реализовывать их поддержку с самого начала.\nСвязанность сервисов Если сервис А использует функционал сервиса Б, эта связь может быть реализована одним из способов:\nГенерация через шину - программная генерация клиентской (А) и серверной (Б) части для отправки в шину сообщений заданного protobuf формата и прием сообщений в этом формате Примитив через шину - п.1. только без автогенерации - ручное формирование и парсинг сообщений через шину сервисом А Генерация gRPC - обмен через gRPC посредством программно сгенерированных по .proto клиента (А) и сервера (Б) на заданном языке Генерация JSON - обмен через HTTP/JSON посредством программно сгенерированных по .proto клиента (А) и сервера (Б) на заданном языке Примитив через JSON - ручное формирование и парсинг JSON сообщений сервисом А Для обмена между микросервисами можно использовать любой протокол из списка\nMQ gRPC JSON / Websockets SOAP Перспективы На основе проекта pgmig можно построить решение, которое запросит в БД описания хранимых функций и по ним сгенерит файл .proto и pg-клиента для сервиса предложенной архитектуры. В результате разработка сервисов будет аналогична PGWS и сведется к\nсозданию пакета в БД верстке страницы и ее js-коду Это позволит перенести в новую архитектуру экспертизу текущего проекта.\nВопросы и ответы 1. Не выйдет ли по данному архитектурному решению так, что во главе всего станет база или какой-то из микросервисов, который будет диктовать \"правила игры\" другим микросервисам? Нет, Правила игры - это формат обмена между сервисами. Варианты обмена перечислены в п. \"Связанность сервисов\" 2. При таком подходе - возможно ли разработка отдельных микросервисов разными командами, на разных технологиях? Да. См. п. \"Связанность сервисов\" 3. Как продолжение предыдущего вопроса - по технике - смогут ли решения от этих разных команд отгружаться на бой в разное время, в разном объеме независимо друг от друга? Да, кроме прочего, protobuf позволяет добавления в структуры новых версий сервера без изменения (и перекомпиляции) клиентов. Однако, может иметь смысл перед релизом сервиса протестировать его внутренних клиентов. Это включает задачу \"определить всех внутренних клиентов заданного сервиса\". В предлагаемой архитектуре эта задача сводится к определению сервисов, использующих файл .proto заданного сервиса. ","description":"Архитектура сервисов, использующих gRPC","id":0,"section":"projects","tags":null,"title":"gRPC","uri":"https://lekovr.github.io/projects/grpc-arch/"},{"content":" Github enfist Назначение хранилище файлов конфигурации в postgresql с доступом через браузер и АПИ Использование в составе dcape Docker apisite/enfist Сервис enfist создавался как составная часть проекта dcape, включен в его состав в 2018м году, и с того времени находится в продакшене. Описание работы с enfist включено в документацию dcape.\nЕсли коротко, то приложение позволяет работать со списком и содержимым файлов конфигурации через web-интерфейс и через API, при этом документация к API генерируется программно.\nЕсли посмотреть на исходный код, то можно увидеть там только SQL, js и статику, которые реализуют бизнес-логику (модуль pomasql/enfist) и интерфейс (в static/ и tmpl/). Для того, чтобы из этого получить работающий сервис, используется фреймфорк apisite.\nТ.о., проект решает две задачи\nфункциональную - сервис хранения конфигураций для CI/CD системы демонстрационную - как пример использующего БД golang-сервиса с API, для создания которого не понадобилось писать код на golang ","description":"хранилище файлов конфигурации в postgresql с доступом через браузер и АПИ","id":1,"section":"projects","tags":null,"title":"enfist","uri":"https://lekovr.github.io/projects/enfist/"},{"content":" Github narra Назначение сервис OAuth2 авторизации для учетных записей gitea, используемый для ограничения доступа к приватным ресурсам Использование в составе dcape Docker dopos/narra Сервис narra создавался как составная часть проекта dcape и они вместе с 2017 г находятся в продакшене. Описание работы с narra включено в документацию dcape.\nВ dcape v1 для ограничения доступа к внутренним ресурсам использовался nginx auth_request, функционал которого реализован в narra и дал три первые буквы в название проекта.\nВ dcape v2 для этих задач используется traefik forward-auth и необходимый для этого функционал OAuth2 прокси был добавлен в narra.\nПричина, по которой narra был доработан, а не заменен на сторонний сервис вроде этого, заключалась в необходимости разрешить доступ не просто зарегистрированному пользователю, а только пользователю, включенному в заданную группу, и OAuth2 прокси с поддержкой такого функционала к ноябрю 2020г найдено не было.\nКроме этого, в проект был добавлен HTTP-сервер для публичной и приватной статики (что позволило в базовой конфигурации dcape отказаться от nginx).\n","description":"сервис OAuth2 авторизации для учетных записей gitea, используемый для ограничения доступа к приватным ресурсам","id":2,"section":"projects","tags":null,"title":"narra","uri":"https://lekovr.github.io/projects/narra/"},{"content":" Github LeKovr/webtail Назначение Публикация изменений (журнальных) файлов через websocket Docker ghcr.io/lekovr/webtail webtail - это веб-сервис и golang-пакет, предназначенные для публикации изменений постоянно дополняемых файлов (например - журналов) по протоколу websocket с доступом через браузер.\nСервис webtail использован в составе первой версии dcape для доступа к журналам развертывания приложений, в версии 2 эта информация доступна через portainer.\nВ начале 2021г у меня появилась возможность сделать рефакторинг исходного кода, доделать документацию и довести покрытие тестами до 77%, это пока удалось только для этого \u0026ldquo;вторичного pet-проекта\u0026rdquo;.\n","description":"Публикация изменений (журнальных) файлов через websocket","id":3,"section":"projects","tags":null,"title":"webtail","uri":"https://lekovr.github.io/projects/webtail/"},{"content":"При всей любви к изобилию доступных библиотек, в последнее время я предпочитаю минимизировать количество зависимостей.\nОсновные причины - чем больше зависимостей, тем\nчаще придется их обновлять (gin в свое время мне этим делом даже какую-то мышцу прокачал, наверное) больше кода надо контролировать Мой кейс по уменьшению зависимостей\nAPI описываем в .proto - это позволяет использовать gogens Применяем protoc-gen-gohttp - получаем обвязку для JSON и protobuf Добавляем go-kit/server - получаем каркас сервера. ","description":"Gin и GRPC","id":4,"section":"notes","tags":null,"title":"Про фреймворки","uri":"https://lekovr.github.io/notes/frameworks/"},{"content":"PgSQL: git-миграции Статус документа: черновик\nЗадача Найти способ разместить хранимый код в файлах так, чтобы его изменения были доступны через git, т.е. придумать миграцию, в которой изменения как можно большей части SQL будут в тех же файлах\nУсловия речь идет, прежде всего, о PostgreSQL конструкция CREATE OR REPLACE {FUNCTION|VIEW} позволяет обновить код без потери функциональности кода, использующего эти объекты тест хранимого кода внутри транзакции, вызвав EXCEPTION, отменяет все изменения Базовые идеи файлы с миграциями разделить на 2 группы\n1.1. создание таблиц с важными данными, которые не должны удаляться без запроса на удаление схемы\n1.2. вспомогательные объекты, которые могут быть пересозданы внутри транзакции (например - справочники) SQL-запросы поместить в файлы, которые исполняются\n2.1. однократно (создание таблиц и их изменение)\n2.2. при каждой миграции (создание/обновление функций и представлений + тесты) Для файлов однократного выполнения считать контрольную сумму, сохранять ее в БД и при следующих запусках проверять ее неизменность SQL удаления объектов сохранять в БД с привязкой к файлу Вариант решения разбить БД на схемы данных, инкапсулирующих связность (чтобы миграция затрагивала минимум схем) в каждой схеме выделить файлы, содержащие только SQL из п. 2.1 - у них маска *_once.sql, при выполнении в БД сохраняется их контрольная сумма (если изменятся - будет предупреждение или прерывание миграции) зафиксировать имя, которое при сортировке файлов разделит список на 2 части\n3.1. корневая - когда надо удалить всю схему\n3.2. вторичная - то, что можно удалить без потери данных корневой для каждого файла предоставить ф-ю с аргументом - SQL удаления созданных объектов, чтобы его сохранили и выполнили по команде \u0026ldquo;удалить файл\u0026rdquo; Какие плюсы Для SQL-разработчиков получим обычную среду разработки В чем сложности Если меняется сигнатура функции, ее надо сначала удалить - нужен алгоритм, как это разруливать Удаление и повторное создание внешних ключей хоть и делаются внутри транзакции, могут не получиться из-за dead-lock на нагруженной БД См. Также Мое pgmig, 2022.. dbrpc, 2017 poma, 2018 Чужое Версионная миграция структуры базы данных: основные подходы, 2011 Версионная миграция структуры базы данных: еще один подход, 2011 Версионная миграция структуры БД: от теории к практике, 2011 Версионная миграция структуры БД: почему так лучше не делать, 2011 ","description":"Контроль версий для SQL","id":5,"section":"notes","tags":null,"title":"PgSQL: git-миграции","uri":"https://lekovr.github.io/notes/pgmig/"},{"content":"Взгляд на RPC со стороны хранимок Термины и определения Во избежание разночтений, приведу определения используемых в тексте сокращений:\nХранимка \u0026ldquo;Хранимая процедура или функция (stored procedure, function). Данные объекты БД пишутся на языке процедурного расширения языка SQL, который дополняет язык SQL такими управляющими структурами языка высокого уровня, как ветвления и циклы, и позволяет реализовать любые алгоритмы обработки данных. Хранимый код постоянно хранится на сервере и выполняется по запросу на его запуск из приложений клиентов\u0026rdquo; 1. API описание способов взаимодействия одной компьютерной программы с другими 2. RPC API \u0026ldquo;Удалённый вызов процедур\u0026hellip; класс технологий, позволяющих программам вызывать функции или процедуры в другом адресном пространстве\u0026rdquo; 3. Предисловие Когда идею совмещения HTML и PHP в одном файле начали считать неправильной, я был этому рад, т.к. считаю, что такое совмещение:\nТребует переключать контекст между разными стеками - декларативным и функциональным. Размазывает требования к квалификации разработчика - уже недостаточно разбираться в одной из двух технологий. Когда идея микросервисов начала принимать форму \u0026ldquo;каждому сервису - свою БД\u0026rdquo;, я был удивлен и опечален тем, что выводы из истории HTML+PHP, очевидные для меня, не попали в тренд.\nВ контексте \u0026ldquo;БД\u0026rdquo; я рассматриваю только СУБД, которые поддерживают хранимый код, поэтому выводы мои были такие:\nSQL и ЯП - разные контексты и первый шаг распила монолита - это поместить их в разные сервисы. Если предоставить ЯП некий АПИ по работе с БД, то этот ЯП может быть любым. Плюс заменить БД тоже будет проще. Если набрать команду, которая отвечает только за данные и операции с ними, предоставляя АПИ, то.. по мне так это здорово, но это не в тренде и опенсорсных решений для такой команды нет (см. ниже про миграции). Далее - о том, как я вижу RPC с точки зрения моего опыта в хранимках.\nОписание АПИ АПИ - это набор сервисов, состоящих из методов. Для каждого метода задается сигнатура - имя, аргументы, результат и описание их структур.\nДля АПИ результат метода желательно иметь простым (скаляр, структура или массив структур), но в самой БД связи могут быть сложнее (не все поля из N таблиц, а некое, адекватное задаче, представление).\nИз этого я сделал вывод, что первичной должна быть схема данных, по которой для каждого метода формируются структуры, которые уже могут быть использованы в описании АПИ.\nНа этом этапе получается такой план:\nОписать предметную область. Спроектировать структуры данных. Описать методы и их сигнатуры. Загрузить это в БД и проверить корректностью По содержимому БД сгенерить описание АПИ (не парсить исходники, а взять метаданные из БД). Вот тут распараллелим - БД:реализация хранимок и тестов, Клиенты:реализация. На текущий момент я под термином \u0026ldquo;описание АПИ\u0026rdquo; понимаю protobuf.\nГенерация кода Итак, у нас есть .proto и по нему мы можем сгенерить:\nИнтерфейсы для сервиса (например - на golang). Клиента (на поддерживаемых генераторами ЯП). Спецификацию OpenAPI (со всеми вытекающими). Но ведь сервис просто будет вызывать хранимки, чего не хватает для его генерации?\nACL (права доступа). Cache (мы работаем с БД, тут это - важно). Есть варианты:\nПротащить эти два пункта через спецификацию и сразу генерить сервис, который вызывает хранимку на SQL. Описать эти метаданные в БД и для генерации сервиса сделать к ней нужные запросы. На мой взгляд, если в protobuf найдется решение - надо выбрать его, иначе придется сочинить собственный стандарт и там выбрать.\nХранимки Программный код (функции и процедуры), размещаемый в БД и выполняемый Под этим термином\nВ чем я вижу их плюсы:\nВся логика работы с БД инкапсулируется внутри нее, а клиентам доступен только некий АПИ. Взаимодействие приложения с БД сводится к запросам вида select a,b from func(x,y). Даже парсить ничего не надо - уже все есть в метаданных БД, и сигнатуры и комментарии/документация. Миграции Насколько мне известно, основной вариант миграций в настоящее время - это оформить в один или несколько файлов все изменения БД текущей миграции. В частности, если надо поменять код хранимки или представления - он дублируется в новом файле с исправлениями (привет, git).\nОднако, конструкция CREATE OR REPLACE {FUNCTION|VIEW} позволяет обновить код в работающей системе. А если обернуть ее в транзакцию и добавить тесты - то обновление сработает только при успехе тестов.\nЕсли мы уберем из рассмотрения системы миграции, которые этот факт не учитывают, что останется?\nМой ответ - написать свою (к слову, мой вариант решения этой задачи в продакшене уже 10 лет).\nТесты Транзакция, в которой производится миграция, может быть дополнена тестами в виде SQL-запросов, которые при ошибке, сразу или в конце тестов, вызывают EXCEPTION и отменяют все изменения БД.\nFAQ Почему protobuf, а не OpenAPI? REST - это для HTTP, круг моих задач шире (там нет PUT/DELETE/etc) и мне нужен RPC. А для HTTP я бы предпочел ReadOnly запросы оформить в GET, остальные в POST. И в обоих случаях имя метода хотелось бы видеть в access.log.\nГде взять спецов по БД и хранимкам? Такие люди есть, но рынок их спрятал за \u0026ldquo;золотой забор\u0026rdquo;. Все же хотели \u0026ldquo;SQL+PHP/Ruby/JS/Java/GO/Rust\u0026rdquo;. В итоге спецы по \u0026ldquo;вечному\u0026rdquo; начали размываться и тратить время на \u0026ldquo;приходящее\u0026rdquo;. И рынок за это заплатит, я считаю.\nС другой стороны, \u0026ldquo;спецом по БД\u0026rdquo; принято считать и DBA, но он отвечает за администрирование, для него разработка вторична и это добавляет сложность в позиционирование и поиск персонала.\nТ.о., корректный заголовок вакансии мог бы выглядеть так: \u0026ldquo;Разработчик SQL/PlPgSQL (не DBA)\u0026rdquo;.\nЧто-то кроме PostgreSQL? Сомневаюсь. Я в прошлом веке к нему пришел, с тех пор стараюсь мониторить альтернативы, но ничего лучше не видел. Хотя, на современный Линтер надо бы глянуть.\nСсылки по теме Использованная литература См. также Habr: Вред хранимых процедур. Goose: Ad-hoc migrations with no versioning. Хелпикс: Основные объекты БД.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nВикипедия: API.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nВикипедия: Удалённый вызов процедур.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"Взгляд на RPC со стороны хранимок","id":6,"section":"notes","tags":null,"title":"Хранимки и RPC","uri":"https://lekovr.github.io/notes/stored2rpc/"},{"content":"Получилось сформулировать ответ на вопрос \u0026ldquo;Почему я топлю за opensource?\u0026rdquo;. Делюсь им.\nОчевидные плюсы Наличие у компании проектов с открытым исходным кодом позволяет\nпоказать кандидатам уровень команды предложить кандидатам поучаствовать (да хоть бы и за оплату решения issue) без заморочек с NDA посмотреть на уровень кандидата из его PR Лично я бы на такое пошел даже без оплаты, потому что\nв opensource-проекте мой коммит навсегда останется моим и пойдет мне в зачет (в т.ч. когда ИИ научится нанимать прогеров по результатам анализа их коммитов на гитхабе) я получу инфу о нанимателе более ценную, чем потраченное время Личный кейс Исходя из варианта, когда есть pet-проекты и любимая работа, возможна (и случалась) ситуация, когда слияние потребностей первого и второго приведет к идее о некоторой библиотеке, которая\nпригодится нанимателю пригодится в моих проектах Как поступить в таком случае?\nнаписать код за деньги нанимателя, отдать ему права и забрать себе слегка переделанную копию сделать за выходные и выложить в опенсорс, а наниматель пусть сам решает сделать пилот за выходные, объяснить тему нанимателю и дальше поддерживать в рабочее время Вот я бы предпочел вариант 3, потому что это дает обоюдопозитивный шанс решением проблемы одной стороны предвосхитить появление аналогичной проблемы у другой.\nКак это разрулить нанимателю - предложить заказчику вариант вроде \u0026ldquo;мы напишем этот код за 10% его стоимости, но выложим в опенсорс, что позволит взять остальные 90% с других 9и клиентов\u0026rdquo;\nPS. по-прежнему интересно, существуют ли еще люди, которые смотрят на это похоже ;-)\n","description":"Зачем публиковать исходный код","id":7,"section":"notes","tags":null,"title":"opensource","uri":"https://lekovr.github.io/notes/opensource/"},{"content":"Занимаюсь ИТ профессионально с 1994г, имею опыт руководства командами реализации и сопровождения таких проектов, как биллинг телеком-оператора, платформа электронной торговли и др. Работаю исключительно дистанционно с 2010г.\nКлючевые навыки организация эффективного процесса разработки с участием программистов, аналитиков, QA и SRE проектирование, реализация и сопровождение решений, использующих PoGoDo Под моим руководством создавали и поддерживали программные продукты команды специалистов по\nразработке БД (хранимый код postgresql) разработке фронтенда (js, jquery, rеасt) администрированию (linux, docker) тестированию сопровождению Опыт работы 06.2022 — настоящее время Разработчик/тех-лид/архитектор в PoGoDo проектах на договорной основе.\n05.2021 - 05.2022, ГК Иннотех, лид команды golang-разработчиков реверс-инжиниринг, анализ и устранение проблемных мест микросервисов в продакшене координация и участие в планировании работ команды разработки (программисты, тестировщики, аналитик) проектирование новых сервисов и доработок существующих 09.2009 - 08.2020, ТендерПро, начальник отдела ИТ Обязанности координация работы команды в целях сохранения работоспособности legacy-продукта и сохранения объема доработок разработка архитектуры новых подсистем + создание MVP внедрение технологий CI/CD для legacy-продукта на основе docker руководство ИТ подразделениями компании: группа сопровождения и развития проекта www.tender.pro (реrl, sql, js) группа back-end разработки (sql) группа front-end разработки (js, jquery, rеасt) группа администрирования (linux, docker, dcape) Личные достижения Организационные\n10+ лет прода создание и обеспечение деятельности квалифицированной команды без текучки кадров подготовка решения по переходу c perl на golang с сохранением текущей команды Технические\n2020, rpc-sample-app - сервис с фронтендом (gRPC/JSON/Websockets/SOAP), вызывающий бэкенд напрямую или через NATS 2017, dbrpc - слой бэкенда тендерной системы, вышедшей в прод, я реализовал golang-подсистему и был лидом sql-команды 2010, PGWS. JSON-RPC интерфейс к хранимым процедурам БД (PostgreSQL/plpgsql, реrl, jаvаsсript) 08.2002 - 09.2009, Южный Телеком, начальник отдела биллинга Руководство группой разработки и эксплуатации биллинговой системы телеком-оператора, решающей задачи:\nпроектирование и разработка ПО для тарификации услуг телеком-оператора (PostgreSQL, реrl, bash) разработка подсистем тарификации трафика клиентов (NetFlow, Radius) тарификация партнерского трафика и обнаружение ошибок в партнерских системах тарификации (PostgreSQL) разработка коннекторов к новому оборудованию (реrl, C) подготовка отчетности и разработка новых отчетных форм (mod_реrl) Личные достижения Вместе с командой спроектировал, реализовал и поддерживал 5+ лет биллинговую систему телеком-оператора Opensource Хобби-проекты, которые я придумал и развиваю в свободное время:\ndopos - Настройка и развёртывание docker-приложений на выделенном сервере (docker, make, golang, gitea, traefik, postgresql) pgmig - Пакетная загрузка SQL (миграции) в БД (golang, postgresql) procapi - API к хранимым процедурам Postgresql (golang) apisite - Фреймворк на основе procapi и apitpl (golang) Полный список проектов: github.com/LeKovr\nДругие проекты 2019, Миграция хранимого кода Оrасlе -\u0026gt; Postgresql (разработчик в составе команды, plpgsql) 2018, Бэкенд аналитики блокчейн бирж (разработчик в составе команды, golang) 2016, Портал авторизации по СМС для Wi-Fi клиентов оператора связи (архитектор и разработчик, golang, jаvаsсript, sqlite) Личные предпочтения Дистанционная работа на личной технике с Linux.\nhttps://lekovr.github.io/cv_cto/\n","description":"Резюме Алексея Коврижкина для должности начальника отдела разработки ПО","id":8,"section":"","tags":null,"title":"Алексей Коврижкин, начальник отдела разработки ПО","uri":"https://lekovr.github.io/cv_cto/"},{"content":"Мой Чек-лист вакансии Если я прохожу интервью и звучат слова \u0026ldquo;а есть ли у Вас какие-то вопросы?\u0026rdquo;, я открываю эту страницу и зачитываю те пункты, которые на этот момент еще актуальны.\n1. Организация работы какую ОС используют разработчики? какой используется диспетчер задач? попадают ли автоматом в задачу связанные с ней коммиты? возникает ли необходимость править непокрытый тестами код, для которого нет документации? называете ли вы свои процессы Agile/Scrum/Kanban и насколько им соответствуете на практике? сколько времени в неделю занимает общение голосом? видео? 2. Коллектив сколько программистов? кто еще есть в команде? есть ли отдельное подразделение эксплуатации и каковы его функции? есть ли отдельное подразделение девопс? 3. Тесты процент покрытия кода тестами как сделаны интеграционные тесты? используется ли в тестах docker? 4. Техдокументация кто пишет? на каком этапе? 5. SQL какая СУБД? как производятся миграции? есть ли хранимый код и для чего? 6. Девопс есть ли кубер и насколько разработка в него погружается? есть ли service discovery? есть ли в деплое контроль версий связанных микросервисов? практикуется ли локальное развертывание инфраструктуры? 7. Опенсорс пишется ли открытый код? есть ли у вашей команды открытые репозитории на гитхабе? есть ли личные открытые репозитории у потенциальных коллег? ","description":"Вопросы нанимателю","id":9,"section":"notes","tags":null,"title":"Чек-лист вакансии","uri":"https://lekovr.github.io/notes/vacancy_checklist/"},{"content":"Что бы я включил в курс о Postgresql Столкнувшись с вопросом \u0026ldquo;Что бы Вы сказали о нашем курсе по Postgresql?\u0026rdquo;, я пришел к выводу, что будет правильно сформулировать мой ответ как ТЗ автору такого курса. Далее - оно.\n1. База Базовая документация Postgresql - https://www.postgresql.org/docs/\nЕе версия на русском - https://postgrespro.ru/docs, но этот перевод предназначен \u0026ldquo;исключительно для использования в личных и/или некоммерческих целях\u0026rdquo;, поэтому, если курс - коммерческий, на перевод ссылаться не надо (но слушателям стоит о нем знать).\nОбратная связь\nДва вида работ с БД - это разработка и администрирование. Будет полезно сразу узнать, зачем пришли слушатели, тут бы помогла анкета из десятка пунктов, чтобы понять, что именно хочет получить текущая группа ознакомиться с документацией и пройти опрос \u0026ldquo;понятно/надо пояснять/иное\u0026rdquo; - это позволит понять уровень группы отсечь очевидные темы сосредоточиться на нужном 2. Введение Pg - серверное приложение, для работы с ним нужен клиент. Варианты клиентов:\npsql - консольный, базовый, идет в составе дистрибутива https://dbeaver.io/ https://www.pgadmin.org/ https://sosedoff.github.io/pgweb/ С сервером Pg можно поработать без его установки, варианты:\nhttps://uibakery.io/sql-playground - доступ через клиент, возможно несколько коннектов https://www.db-fiddle.com/ - www https://extendsclass.com/postgresql-online.html - www Обратная связь\nопрос - какой клиент предпочтительнее вам, чтобы мы его скриншоты вам на занятии показывали опрос - как с серверами, что удобнее - ссылки выше/на своем компе/VDS с linux/иное 3. Основная часть Для закрепления привязки курса к Базовой документации, темы я бы оформил как ссылки на ее разделы.\n5. Data Definition Тут стоит обратить внимание на CREATE UNLOGGED TABLE, пример - PostgreSQL as a Cache\n9. Functions and Operators Тут стоит обратить внимание на\n9.12. Network Address Functions and Operators 9.19. Array Functions and Operators, в частности - unnest но наиболее интересен блок\n9.16. JSON Functions and Operators\nв чем фишка (от 2017г) - Postgres vs Mongo\n13. Concurrency Control чаще всего используется Read Committed, стоит добавить задачи, для которых подошли бы другие уровни для отработки примеров подойдет https://uibakery.io/sql-playground еще полезное про блокировки - SELECT ... FOR UPDATE SKIP LOCKED 14.1. Using EXPLAIN https://explain.tensor.ru/ Как мы ускорили выполнение запросов PostgreSQL в 100 раз 16. Installation from Binaries В базовой доке нет ничего про облака или докер, про облака бы пригодился список вариантов с указанием текущих цен, про докер может хватить https://hub.docker.com/_/postgres\nОбратная связь\nОпрос - какова для вас сложность варианта\nпакеты docker PS. Про обновление версии - уже есть простое решение (https://github.com/tianon/docker-postgres-upgrade), стоит его разобрать.\n31. Logical Replication Вполне можно в рамках одного занятия реализовать N-мультимастер на логической репликации с хэш-функцией.\n38.7. Function Volatility Categories Как описать функцию, которую можно запустить на реплике (потому что она не VOLATILE)\n38.17. Packaging Related Objects into an Extension https://github.com/citusdata/citus в т.ч. citus_columnar https://tembo.io/blog/postgres-extension-in-rust-pgmq/ 40. Event Triggers Это про DDL-триггеры, хорошо бы добавить примеры (при изменении хранимки положить ее в гит?)\n42. Procedural Languages https://github.com/plv8/plv8 Дополнения Проекты за рамками курса, которые, возможно, стоит упомянуть\nhttps://github.com/getredash/redash https://github.com/PostgREST/postgrest https://github.com/message-db/message-db https://github.com/lesovsky/pgcenter https://github.com/NikolayS/postgres_dba https://gitlab.com/postgres-ai/postgres-checkup ","description":"Что бы я включил в курс о Postgresql","id":10,"section":"notes","tags":null,"title":"Про курс по Pg","uri":"https://lekovr.github.io/notes/pg_course/"},{"content":"Ниже приведены мои варианты решения типовых задач, которые у меня возникали при разработке на golang.\nfunc main() Пока я не нашел удобный способ тестировать main(), мой вариант - сократить эту функцию до одной строки и убрать ее из тестов.\nЕсли репозиторий содержит бинарник с именем APP, его функция main() размещается в отдельном файле cmd/APP/main.go со следующим содержанием:\n1 2 3 4 5 6 7 8 9 //+build !test // This file holds code which does not covered by tests package main import \u0026#34;os\u0026#34; func main() { Run(os.Exit) } log structured logging - чтобы парсить без геморроя, для прода это json stream. т.е. если в пакете логгирования есть строка формата - это сразу убираем поддержка терминала. Да, в проде хорош json, но при отладке хотелось бы цветной читабельный логгинг в терминал Пока не было log/slog, я смотрел на тему так:\nдля случаев, отличных от примитивных, необходима возможность парсить логи приложения. Тут мой выбор - structured logging и вариант его реализации - zap вместе с этим, зашивать конкретную имплементацию журналирования мне представляется не оптимальным, поэтому в пакетах использую logr в тестах, если надо собрать логи и потом проанализировать, я использую genericr Теперь ситуация изменилась\nне осталось причин не использовать глобально пакет log/slog. Все его настройки можно сделать на старте, а работа с контекстом стала даже удобнее Для логгирования контекста вместо log.FromContext использую slog.ErrorContext если понадобится зависимость уровня логгирования от пакета - это решится в slog.Handler log usage Ссылка на log не передается конструктору и не является глобальной переменной. Она передается в конкретном вызове или через контекст.\nПочему: В строку журнала может понадобиться добавить переменную со значением из текущего запроса (например - traceId, или еще что-то уровнем выше текущего пакета)\nconfig Для конфигурации приложения наиболее характерный пример для меня - использование библиотеки, у которой есть свой конфиг, при обновлении которого я бы не хотел ничего менять в своем приложении. Я использую go-flags и выглядит это так:\n1 2 3 4 5 6 type Config struct { Addr string `long:\u0026#34;http_addr\u0026#34; default:\u0026#34;localhost:8080\u0026#34; description:\u0026#34;Http listen address\u0026#34;` FS lookupfs.Config `group:\u0026#34;Filesystem Options\u0026#34; namespace:\u0026#34;fs\u0026#34; env-namespace:\u0026#34;FS\u0026#34;` API procapi.Config `group:\u0026#34;API Options\u0026#34; namespace:\u0026#34;api\u0026#34; env-namespace:\u0026#34;API\u0026#34;` } pg Однажды, в mqbridge, мне понадобилось работать с каналом (db.Listen(channel).Channel()), для этого я выбрал go-pg. В остальных случаях использую pgx\nembedding Выбор пакета для меня определяется ответом на вопрос - \u0026ldquo;Нужна ли UnionFS\u0026rdquo; (т.е. возможность локальным файлом заменить какой-то файл из дистрибутива)\nесли нужна - go-imbed если нет - parcello Начиная с go 1.16, первичный вариант решения - embed\ndeploy Тут все очевидно. Как автор dcape, деплой всех своих приложений я делаю так. Другие варианты - это уже подарки тестовых задач. Добавлю, что, на мой взгляд, навык заворачивания приложения в docker я считаю полезным для программиста, а опыт управления kubernetes - нет. По двум причинам (k8s не единственный и не последний. Разве это не экспертиза уровня webpack?)\nerrors В точке возникновения ошибки коду доступен\nконтекст аргументы вызова текущей функции стек Эти данные важны разработчику, но не пользователю (которому хватит номера ошибки и текста).\nИз этого я делаю вывод, что в момент отлова ошибки надо в лог положить все детали и переменные контекста, а наверх отдать какой-то примитив или ID. Но уж точно не надо весь контекст момента ошибки тащить наверх в полях ошибки.\ncache Если кешируем БД, для меня первейшая фича - если значения в кэше нет, обратиться к БД и поставить в очередь все такие же запросы. Я это нашел - groupcache\nСмысл очевиден - не грузить БД одинаковыми запросами\nЕсли нет работы с БД - все проще. Есть много вариантов и в какой-то момент я вышел на решение от patrickmn.\nСледующий вариант сделал arp242, добавив к предыдущему дженерики. И это мой текущий выбор\ngenerated code naming На мой взгляд, есть плюсы в добавлении префикса \u0026ldquo;z\u0026rdquo; к имени файла, если он генерируется. Как минимум, это облегчает ревью, оставляя все такие правки на конец.\nВот пример из исходников Go.\nМое личное предпочтение по этой теме - выносить все генерируемое в папку /gen, как сделано тутю\n","description":"Решения типовых задач","id":11,"section":"notes","tags":null,"title":"GoLang Solutions","uri":"https://lekovr.github.io/notes/golang/"},{"content":"В SQL мне наиболее интересна работа с хранимым кодом в PostgreSQL, но до того, чтобы собрать отдельный справочник, руки пока не доходят. Поэтому наполнение этой страницы еще в начальной стадии\nПример теста 1 2 3 4 5 6 7 8 9 10 11 12 13 SAVEPOINT test_begin; select pgmig.assert_count(1); -- ---------------------------------------------------------------------------- SELECT pgmig.pkg_op_before(\u0026#39;init\u0026#39;, \u0026#39;test_pgmig\u0026#39;, \u0026#39;v0.0\u0026#39;, \u0026#39;git\u0026#39;); SELECT pgmig.assert_eq(\u0026#39;pkg_op_before\u0026#39; , (SELECT jsonb_build_object(\u0026#39;code\u0026#39;,code,\u0026#39;version\u0026#39;,version) FROM pgmig.pkg where code=\u0026#39;test_pgmig\u0026#39;) , \u0026#39;{ \u0026#34;version\u0026#34;: \u0026#34;v0.0\u0026#34;, \u0026#34;code\u0026#34;: \u0026#34;test_pgmig\u0026#34; }\u0026#39;::jsonb ); ROLLBACK TO SAVEPOINT test_begin; Мой топ в апреле 2022 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 select r.* , abs.abs_rank , cl.cl_rank from results r left join ( select id , row_number() over() as abs_rank from results where in_abs=1 ) abs using(id) , lateral ( select * --coalesce(cl_rank,null) as cl_rank from ( select id , case when r.cl_next is null then null else row_number() over(partition by cl_next order by drv1_id) end as cl_rank from results r2 where r.cl_next is null or r.cl_next = any(r2.cls) ) cll where id = r.id ) cl ; См. также\npgmig-sql pomasql-md pgmig ","description":"Решения для SQL","id":12,"section":"notes","tags":null,"title":"SQL Solutions","uri":"https://lekovr.github.io/notes/sql/"},{"content":" Приложение pgws назначение технология создания АПИ для хранимых функций Postgresql и автоматического их проксирования http-клиентам ","description":"Postgresql webservices","id":13,"section":"archive","tags":null,"title":"pgws","uri":"https://lekovr.github.io/archive/projects/pgws/"},{"content":"Когда-то однажды, в 1998м году, я готовился к релокации в Англию. В какой-то момент уровень моей подготовки был сформулирован как \u0026ldquo;подгони разговорный и мы тебя заберем\u0026rdquo;. Я нашел местную школу с \u0026ldquo;native speaking teachers\u0026rdquo; и их входной тест показал уровень \u0026ldquo;Intermediate\u0026rdquo;. На сегодня для меня это - давно забытый рекорд. Я могу читать и писать, до сих пор основная часть моих знаний приходит из текстов на английском. Но вот \u0026ldquo;участвовать в митингах\u0026rdquo; - тут извините.\nВозможно, я стану лучше, но пока, когда я вижу у вакансии \u0026ldquo;разговорный английский\u0026rdquo; или \u0026ldquo;митинги на английском\u0026rdquo;, мне это видится так:\nработа на галере, где придется лично разруливать запросы иностранного заказчика (вот такое я даже на русском не хочу) в команде - \u0026ldquo;индусы\u0026rdquo; и тебе придется на чужом для тебя языке разжевывать им, где они тупят Тут, в общем, такая проблема - это всё добавляет дискомфорт, за который я захочу дополнительные деньги. И в итоге получится такая большая сумма, что мне, собственно, столько и не надо. Ну, т.е. это как в золотари меня позвать (если кто понял)\n","description":"Some thoughts about foreign languages","id":14,"section":"notes","tags":null,"title":"English","uri":"https://lekovr.github.io/notes/english/"},{"content":"PoGoDo - это сокращеный вариант обозначения проектов, использующих следующие технологии:\npostgesql - данные размещены в этой СУБД golang - интерфейс к данным реализован на этом ЯП docker - деплой приложения использует такие контейнеры ","description":"Postgresql + Golang + Docker projects","id":15,"section":"","tags":null,"title":"PoGoDo","uri":"https://lekovr.github.io/pogodo/"},{"content":"modGD graphing module - Библиотека на Си для построения графиков по XML спецификации.\nИспользует libgd2 и libxml2. Это - коммерческий проект для английского знакомого моего бывшего коллеги и демку не выложить, но познакомиться с C программированием под Linux мне было интересно. Особенно в части .so и CGI.\nЯ подобным занимался и в универе и в 95м, потому и согласился. Наиболее запомнилась боль, вызванная необходимостью писать на С при знании, что на С++ все было бы проще. Тем не менее, я успел вывести проект на 70% (на мой взгляд) готовности до того, как заказчик передумал решать задачу таким путем.\nНиже приведены диаграммы, которые к этому моменту (modgd v0.0.73) делала библиотека.\n1 Dataset 2 Datasets bar.xml bars.xml line.xml lines.xml pie.xml pies.xml point.xml points.xml ","description":"","id":16,"section":"archive","tags":null,"title":"modgd","uri":"https://lekovr.github.io/archive/projects/200x/modgd/"},{"content":"Это, как-бы, пилот того, что мне хотелось вложить в понятие \u0026ldquo;веб-движок\u0026rdquo;. Некое универсальное ядро, лишенное известных мне недостатков известных мне движков. В частности, хотелось, чтобы\nадрес любой страницы был коротким и читабельным, а не содержал сотню понятных только самому движку символов даже запароленную страницу можно было добавить в закладки и потом это работало писать всякие модули вроде форума и голосования под это было легко и удобно В общем, много чего хотелось. И что-то из этого получилось. Сайты на этом движке попали в webarchive:\nfarma.ru price.kuban.su podpiska.kuban.su Ниже приведена документация оригинального проекта\nПроект JAST Just Another Server Toolkit - это основанный на GNU GPL набор perl-модулей, призванный облегчить создание и поддержку интенсивно использующих СУБД web-сайтов некоторых типов. Проект был в активной фазе в 2001м году и далее приводятся тексты из описаний того времени.\nСайты В настоящий момент каждый разрабатываемый сайт имеет как минимум две инсталляции - опытную и промышленную (не считая development версий, доступных только в LAN). Опытные инсталляции предназначены для тестирования, ознакомления, обучения и\nне содержат корректной и реальной информации. Все официальные данные публикуются только на официальных сайтах.\nПроект Официальный сайт Версия JAST Версия сайта Прайс-листы фармацевтики www.farma.ru 0.1 0.1 Что? Где? Почем? Краснодар www.price.kuban.su 0.1 0.1 Каталог подписных изданий www.podpiska.kuban.su 0.1 0.0.81 Новости 24.12.01 JAST v0.1 установлен на www.farma.ru и тестовых версиях сайтов.\n23.12.01 Первый публичный релиз JAST v0.1 установлен на www.price.kuban.su. Цель, появившаяся в июле 1999г, вошедшая в число текущих задач в июле 2000 и оформившаяся в код в августе 2001, достигнута.\nИменно этому коду будет присвоен номер 1.1 после решения вопросов лицензирования и структуры дистрибутива.\n22.12.01 v0.0.85 установлена на www.farma.ru и тестовых версиях сайтов.\n21.12.01 v0.0.83 установлена на www.farma.ru и тестовых версиях сайтов. Тесты обнаружили некоторые баги в работе каунтера, что повлекло выпуск релиза 0.0.84 в 8 p.m. того же дня.\n17.12.01 Сайт www.farma.ru перенесен с www.price.farma.ru и открыт для публичного доступа, произведена установка всех тестовых версий сайтов.\n16.12.01 Запущен сайт www.price1.kuban.su. www.podpiska.kuban.su переведен на JAST v0.0.81 16.10.01 Для авторизованных тестеров запущен сайт www.price.farma.ru\n15.10.01 www.podpiska.kuban.su переведен на JAST v0.0.71\n10.10.01 Ветка JAST признана основной, релиз 0.0.70 помещен в cvs репозиторий\n19.08.01 www.podpiska.kuban.su переведен на JAST v0.0.70pre2\n4.08.01 Работы над веткой JAST возобновлены\n8.05.01 Открыт сайт www.podpiska.kuban.su (JAST v0.0.70pre1) Работа над проектом JAST приостановлена Технологии Использующие JAST сайты работают на серверах, оборудованных следующим:\nASPLinux Russian Apache mod_perl PostgreSQL Mason и десяток других модулей от CPAN ","description":"","id":17,"section":"archive","tags":null,"title":"Just Another Server Toolkit","uri":"https://lekovr.github.io/archive/projects/200x/jast/"},{"content":" Plk 1\nPlk 2\nPlk 3\nweb.archive.org сохранил, как это выглядело.\nПриятно вспомнить о проекте, созданном за полтора месяца, и проработавшем 2,5 года (1.07.99 - 23.12.01) до переезда на HTML::Mason.\nЭто мой первый коммерческий проект и для web и на perl. ТЗ, верстку и код я делал сам. Подробности были изложены на странице, которую я здесь и процитирую..\nДалее - цитаты из www.price.kuban.su/about\nВозможности Для покупателей Любой прайс из газеты \u0026ldquo;Что? Где? Почем?\u0026rdquo; на Вашем компьютере. Возможности поиска по разделу минимальны, но есть. Иногда посмотреть здесь прайсы проще, чем скачать архивы с нескольких сайтов, а иногда только здесь эти прайс-листы и есть. Для продавцов Ваш прайс публикуется в Интернет без ваших усилий (если вы - клиент ОКЕЙ Пресс) и\tс минимальными усилиями (если вы - просто вы Вы можете просто и бесплатно завести свой первый адрес в интернет, размещать прайс-лист и увидеть, насколько это Вам выгодно Почему все так, как оно тут Одной из главных целей проекта была минимальная себестоимость. Эта цель достигнута вполне. Основная часть проекта была реализована в течение нескольких недель в свободное от 8и часовой работы время. И получилась, возможно, вполне интересная база для дальнейшей работы. И эта работа ведется. С постоянным контролем за экономической целесообразностью проекта. Наш принцип - целевые инвестиции и быстрая окупаемость.\nДругая цель проекта - предоставлять посетителям сайта именно прайс-листы, а не анализ и сравнение цен разных продавцов. Это было изначальным условием. Оно изменится, конечно, но пока это еще так.\nБезусловно, дизайн сервера довольно примитивен. Но это, всего лишь, следствие того, что пока не нашлось дизайнера, предложившего свои услуги не на заказ (заказы на дизайн стоят в плане следующей версии), а просто потому, что он хочет реализовать себя в этом проекте. Оплата другого дизайна не была бы вопросом. Но пока актуальнее сама идея. Информация - прежде всего. И, если говорить о функциональности сервера, когда Вы найдете в Рунете другой сайт, где можно за несколько минут бесплатно разместить прайс на несколько сотен позиций - сообщите нам. Мы укажем адрес здесь: []\nИстория Идея проекта с его текущим наполнением оформилась в конце 1998 года. Последующий поиск хостера и общение с агенством ОКЕЙ-Пресс привели к тому, что 14 апреля 99г. по адресу price.kuban.su была запущена 1я пилотная версия проекта (v0.11). Движок был основан на данных из flat-файлов и имел весьма ограниченные возможности по администрированию и поддержке. Тем не менее, сайт работал и стало ясно, что работать будет.\nТекущая версия движка основана на Perl и PostgreSQL, что позволило обеспечить работу пользователей и администраторов разделов через web-интерфейс. Новая версия сервера (v1.22) была запущена в опытную эксплуатацию 1 июля 1999г. и просуществовала практически неизменно до 4 ноября 2000. Достаточно, если не сказать слишком долго для еженедельно обновляемого сайта, но на то были свои причины.\n5 и 6 ноября произведены некоторые изменения внешнего вида и расширено использование SSI (v1.23).\nCуществует, конечно, вероятность что эти изменения породили какие-нибудь ошибки. Срок опытной эксплуатации v1.23 - c 6 по 30 ноября 2000г.\n7 апреля 2001г. v1.24. Незначительные изменения в функциях администрирования и теперь, кроме даты прайс-листа,\nсписок фирм содержит общее количество строк каждого прайса.\nПроект открыт для любых форм участия. Если у вас есть пожелания, предложения или вы хотите присоединится - свяжитесь с нами. Мы не считаем текущую версию законченным решением. Список ToDo следующей версии содержит несколько сотен позиций. А может, как раз Вас нам и не хватает?\n","description":"Первый проект на perl","id":18,"section":"archive","tags":null,"title":"Прайс-листы Кубани","uri":"https://lekovr.github.io/archive/projects/199x/plk/"},{"content":"Дизайн www.kuban.su\nЭто не проект даже, а просто подарок провайдеру нового вида страницы, по ссылке с которой, как оказалось, приходит довольно много посетителей. Кому-то эта нарисованная в августе 1999 года картинка, может и покажется симпатичной, но для меня это еще одно доказательство того, что я не дизайнер и этим должны заниматься другие ;) И пару слов о фотографии, которая висит на этом же сайте и является составной частью оформления. Снимок сделан в Долине очарования цифровым фотоаппаратом и, хотя на полной версии снимка запечатлен не я, право публиковать это изображение у меня есть ;) ","description":"Я не дизайнер, но однажды попробовал","id":19,"section":"archive","tags":null,"title":"'Дизайн' kuban.su","uri":"https://lekovr.github.io/archive/projects/199x/kuban/"},{"content":" Tx2graph 1\nTx2graph 2\nTx2graph 3\nTx2graph 4\nTx2graph 5\nПрограмма для построения графиков по текстовым файлам. Альтернатива парадоксовскому модулю графики, адаптированная для презентабельного представления необходимого количества значений (до 25).\nВызывалась из скриптов Paradox 4.5 (DOS) для графического вывода аналитических показателей.\nСкриншоты выше не имеют увеличенного представления, т.к. IMHO и так все понятно и разбираться, есть ли в показанных числах коммерческая тайна, смысла не имеет ;)\nВсе приведенные скриншоты сделаны с одного набора данных. Тип графика, наличие меток и т.п. может быть задано при запуске или из меню программы. Также реализована поддержка просмотра фактических значений по каждому показателю и печать графика на матричный принтер.\nРазмер исходных текстов - 56К, .exe файла - 71К, время написания - 1995г.\nИз документации:\nПрограмма графического представления данных предназначена для облегчения анализа расчетных данных,\nполученных с помощью программного обеспечения банка. Ограниченность функций данной программы обусловлена требованием компактности загружаемого кода и нецелесообразностью попыток достичь собственными средствами уровня существующих графических пакетов. Отличительными особенностями данной программы являются ее ориентация на существующую в банке организацию информации, учет основных пожеланий конечных пользователей и возможность загрузки программы непосредственно из среды Paradox.\n","description":"Диаграммы для Paradox","id":20,"section":"archive","tags":null,"title":"tx2graph (C)","uri":"https://lekovr.github.io/archive/projects/199x/c/"},{"content":"Все размещенные здесь архивы содержат исходные тексты программ, написанных мной, и\nопубликованы на условиях GPL.\nСомневаюсь, что это может быть интересно или полезно кому - нибудь, но - purcua pa? ;)\nResource manager (Modula) Архив Назначение resman.zip Предотвращение тупиков с использованием алгоритма банкира Это - оригинальный дистрибутив зачетной задачи, реализованной за одну ночь в октябре 1993г по технологии, которую я бы тогда назвал \u0026ldquo;парное программирование\u0026rdquo; ;-). Суть ее была в том, что участник-1 получает доступ к терминалу на 1 час, после чего распечатывает результат и в течение следующего часа анализирует распечатку, пока участник-2 пользуется терминалом. Вот так мы за ночь с моим кумом Юрой Хомутовым сделали наши зачетные задачи на ВЦ, где работали его родители.\nКодировка исходников - 866. Исполняемый файл из архива, по состоянию на 7.04.2021, рабочий, команда запуска под linux: dosbox TASKBODY.EXE\nClubJES (Clarion) Архив Назначение clubjes.zip Программа для учета того, что Вы отдали кому-то и того, что Вы взяли у кого-то Эта программа была написана для того, чтобы определить, сколько времени нужно для написания минимального приложения на незнакомой платформе. Получилось 3 часа ;-)\nКодировка исходников - 866, исполняемый файл из архива, по состоянию на 7.04.2021, рабочий, но интерфейс содержит кириллицу и я пока не копал, как это победить в dosbox.\nJESICA (C) Архив Назначение jesica.zip Фреймфорк для оформления зачетных задач Основная цель данной разработки - стандартизация интерфейса вычислительных задач посредством создания универсальной библиотеки сервисного ввода - вывода, свободно подключаемой к широкому классу вычислительных задач. Другими словами, это оболочка, подключаемая к различным зачетным задачам, предназначенная для создания комфортных условий ввода исходных данных и просмотра результатов работы алгоритмов (термин \u0026ldquo;Фреймфорк\u0026rdquo; тогда не использовали).\nИнтерфейс программы в основном соответствует стилю IDE (меню динамического доступа, выход по Alt-X, клавишная подсказка, горячие клавиши и т.д.).\nОсновные особенности оболочки\nНезависимость горячих клавиш от состояния клавиатуры Постоянное присутствие полной подсказки на экране логическая подсказка - окно \u0026lsquo;Комментарий\u0026rsquo; клавишная подсказка - последняя строка экрана Эту библиотеку я далее использовал во всех своих зачетных задачах:\nМетод обратного вывода Архив: es1.zip\nПрограмма для определения выводимости символов - заключений продукций методом обратного вывода с использованием стратегии приоритетов.\nВходные данные : список продукций (заключение и от 1й до 4х посылок )\nОсобенности реализации алгоритма\nПамять для данных выделяется динамически Основная структура данных - частично-древовидная сеть Истинность аксиом определяется интерактивно Возможно обоснование результатов вывода Поиск простых циклов в графе Архив: ds1.zip\nПрограмма для выявления простых циклов в графе.\nОсобенности реализации алгоритма\nПамять для данных выделяется динамически Ограничение на количество ребер используется исключительно для удобства ввода списка ребер При суммировании учитываются циклические ребра Обозначение вершин произвольно Локализация в ППЛГ Архив: ds2.zip\nПрограмма для локализации точки относительно ППЛГ методом трапеций. Входными данными является список ребер ППЛГ.\n","description":"зачетные задачи","id":21,"section":"archive","tags":null,"title":"Си и Модула","uri":"https://lekovr.github.io/archive/projects/199x/ksu93/"},{"content":" Работа с удовольствием добавляет совершенство в ее результат\nАристотель\nМне нравится создавать программы, которые решают конкретные задачи и приносят в этот мир нечто полезное. Если задача интересна только мне, я делаю MVP и публикую его на гитхаб.\nС 2015 года основную часть программ я пишу на golang. Это - бэкенд приложения, как правило API (JSON_RPC или gRPC, реже - REST, TWIRP). Если используется БД, то это Postgresql (включая plpgsql). Для деплоя (CI/CD/gitops) использую свое решение (dcape), основанное на docker-compose.yml и Makefile. Если для получения работоспособного прототипа надо добавить несложный фронт, я использую свой давний опыт и привлекаю LLM. Если в проекте участвует несколько разработчиков, я, как правило, их возглавляю. В современном мире, некоторые задачи (вроде генерации тестов) может выполнить ИИ. Я об этом помню и, где это уместно, использую. Вся разработка ведётся под linux (с 2003г), удаленно (с 2009г).\nМои роли в проектах:\n• разработчик\n• тимлид\n• архитектор\nБолее всего мне интересны проекты, в которых:\nСерверная часть пишется на go Правки OpenSouce проектов выкладываются в OpenSouce, прежде всего как MR (Merge Request) Роли Архитектор / Разработчик проектов, использующих\ngolang postgres nats docker Занимаюсь ИТ профессионально с 1994г, специализируюсь на бэкенде и имею опыт в администрировании linux/docker и задачах фронтенда (html/vanilla js).\nНе ограничиваюсь кодированием по ТЗ и стараюсь сделать все возможное для успеха проекта в целом.\nВ командах занимал роли от разработчика до архитектора и тимлида.\nOpensource В свободное время и в рамках проектов я участвую в opensource и публикую код тут - github.com/LeKovr.\nСтатистику таких публикаций после 2012 года может быть удобнее смотреть на codersrank. Этот ресурс я использую для информации о том, сколько и какого кода отдано в opensource, объем коммитов сути сделанного не релевантен. Тем более, что они в какой-то момент убрали статистику про docker-compose.\nМой выбор postgresql - я писал под Оrасlе, когда в 1999г встретил СУБД, которая, на мой взгляд, мотивировала не закапываться в лишнее, а делать именно то, для чего SQL и хранимый код наиболее подходят golang - в 98м я выбрал реrl из-за CPAN. В 2015г перешел на golang, который меня привлек лаконичностью, обилием современных библиотек, линтерами, генераторами и т.п. С этого времени все, что не sql и bash, пишу на golang docker - когда он вышел в опенсорс, такие решения как сhеf, аnsiblе, рuрреt, на мой взгляд, потеряли актуальность. Я добавил его в свой стек в 2014г и с его помощью закрываю все задачи деплоя, кроме энтерпрайз-решений на k8s, которыми занимаются уже другие команды linux - начал использовать в 1998г, перестал использовать другие ОС в 2002г удаленка - работаю дистанционно с 2006г, для меня готовность получать нужный результат от сотрудника на удаленке - одно из ключевых требований к нанимателю Также имею реализованные проекты с использованием\nРеrl (1999 - 2015) Dеlphi (1998 - 1999) Оrаclе PL/SQL (1997 - 1999) PАL/QBЕ (1994 - 1997) С (1994 - 1995, 2002) Pаsсаl (1990 - 1993) Примеры проектов Наиболее крупные проекты, в которых я участвовал\nтранспортная платформа учета и тарификации поездок в ОТ г. Москва (go, rabbit, postgresql), 2021г бэкенд тендерной системы (go, plpgsql), 2017г ядро тендерной системы (perl, plpgsql, jquery), 2010г биллинг оператора фиксированной связи (perl, plpgsql, C), 2003г сервисы публикации прайс-листов для региональной газеты и фармацевтической компании (perl, plpgsql), 2001г расчет и консолидация экономических показателей филиалов банка (PAL), 1996г Что ищу IT-команду, которая\nсопровождает бизнес, привносящий в этот мир что-то материальное и(или) полезное реализовывает проекты с длительным жизненным циклом практикует участие в opensource имеет в составе сотрудников на удаленке использует linux как основную ОС готова использовать Makefile, git submodule, plpgsql Я бы предпочел начинать общение с новой командой с обсуждения её и моих opensoure-проектов.\nPS. а если есть проект, посвященный интеграции хранимого кода postgresql, golang и rpc - я был бы рад добавить в него свои экспертизу и ресурс.\nЧто не ищу проекты, связанные со спамом, азартными играми и т.п. митинги по графику без реальной темы релокацию за пределы ЮФО РФ Опыт работы Системный архитектор (ноябрь 2023 — настоящее время) Компания: Vinteo Должность: Ведущий системный архитектор. Отдел поддержки инфраструктуры. Проектирование и реализация проектов:\nтехнология портирования php в golang с использованием LLM (coverage 100%, gpt-oss:20b, RooCode, ollama) прокси-сервер для добавления кластерного функционала в сингл-хост решение (golang, NATS, protobuf, otel) кластерная версия сервисов ВКС (Vinteo server, docker, keepalived, galera, mcrouter) сервис резолвинга (DoH) для dnsdist по данным ipvsadm (golang) сервис локального деплоя приложений с управлением по API (golang, https://gitflic.ru/project/vinteo/comas) ИП (май 2015 — ноябрь 2023) Разработчик/тех-лид/архитектор в PoGoDo проектах на договорной основе.\nRnD по теме GRPC/protobuf/buf (gogens) Сервис однократного показа паролей (showonce) IoT в части управления освещением посредством smart-часов (hocon, js / zeppOS) dopos, DevOps в части адаптации проектов для docker-compose и make Другие проекты, в которых я участвовал в период 2015 - 2020\nКак разработчик в составе команды 2019, Миграция хранимого кода Оrасlе -\u0026gt; Postgresql (plpgsql) 2018, Бэкенд аналитики блокчейн бирж (golang) Как архитектор и разработчик 2016, Портал авторизации по СМС для Wi-Fi клиентов оператора связи (golang, jаvаsсript, sqlite) 2015, Генератор сайта магазина по xls и md, универсальный API обработки заказов (golang) Тимлид golang (май 2021 - май 2022) Компания: ГК Иннотех, Москва Должность: Руководитель группы разработки GoLang Задачи\nкоординация и участие в планировании работ команды разработки (программисты, тестировщики, аналитик) реверс-инжиниринг, анализ и устранение проблемных мест микросервисов в продакшене проектирование новых сервисов и доработок существующих (go, TWIRP, rabbit, postgresql) До октября 2021 - Старший разработчик GoLang\nсоздание новых сервисов (GRPC/TWIRP + Postgresql) сопровождение существующих сервисов, обслуживающих общественный транспорт г. Москва (оплата поездок, web-шлюз пользователей и т.п.) Личные достижения\nРеализовал пилот про мультимастер Pg с шардингом и логической репликацией. Начальник отдела ИТ (август 2006 - август 2020) ООО ТендерПро, Москва\nРуководство ИТ подразделениями компании группа сопровождения и развития проекта www.tender.pro (реrl, sql, js) группа back-end разработки (sql, plpgsql) группа front-end разработки (js, jquery, rеасt) группа администрирования linux Координация работы команд в целях сохранения работоспособности legacy-продукта и добавления нового функционала Реализация ключевых моментов архитектуры (plpgsql, perl, jQuery) Анализ функциональных требований и согласование их со структурой продукта Внедрение технологий CI/CD для legacy-продукта (я внедрил техпроцесс на основе docker (dcape) для mod_perl-1.24 и двухэтапную систему релизов) Разработка архитектуры новых подсистем + создание MVP rpc-sample-app - сервис с фронтендом (gRPC/JSON/Websockets/SOAP), вызывающий бэкенд напрямую или через NATS (+ rpckit, мой вариант миграции legacy в 2020м году sfs - мой вариант архитектуры файл-сервера grpc-sample - начальная архитектура gRPC API Личные достижения\n2016, dbrpc - прокси \u0026ldquo;JSON-RPC 2.0 -\u0026gt; plpgsql\u0026rdquo;, позволивший работать параллельно командам фронта (js), бекенда (elixir) и БД (plpgsql), (golang) 2010-2012, PGWS - фреймворк на основе JSON-RPC интерфейса к хранимым процедурам БД (PostgreSQL/plpgsql, реrl, jаvаsсript) 2012, formEV- плагин jQuеry для просмотра/редактирования форм (jаvаsсript) До октября 2009г - Fullstack (реrl) программист\nПерсональные задачи:\nДоработка текущего, проектирование и разработка новых версий ядра системы (mod_реrl, PostgreSQL) Личные достижения\nПодсистема тарификации клиентов на основе очереди задач (реrl, plpgsql) Другие проекты, которыми я занимался на уровне пилотов или подготовки к продакшену 2012, Прототип Удостоверяющего Центра ЭЦП, сервер и клиент (реrl, bash) 2009, Эмулятор работы колл-центра (PostgreSQL/plpgsql, OpenOffice.org Base) Тимлид биллинга телеком (август 2002 — сентябрь 2009) Южный Телеком, Краснодар\nРуководство группой разработки и эксплуатации биллинговой системы телеком-оператора.\nПервоначальные задачи включали проектирование и разработку систем тарификации и их эксплуатацию, впоследствии добавились задачи эксплуатации внешних систем, построения и развития комплексного решения.\nС ростом круга решаемых задач, менялась структура отвечающего за них подразделения и c 2004г его штат составлял 5 человек.\nпроектирование и разработка ПО для тарификации услуг телеком-оператора (PostgreSQL, реrl, bash) разработка подсистем тарификации трафика клиентов (VoIP, NetFlow, Radius) тарификация партнерского трафика и обнаружение ошибок в партнерских системах тарификации (PostgreSQL) разработка коннекторов к новому оборудованию (реrl, C) подготовка отчетности и разработка новых отчетных форм (mod_реrl) Личные достижения\nСпроектировал и реализовал при участии команды биллинговую систему телеком-оператора Проекты Проекты, которые находились (или находятся) в продакшене более года\n2005, Онлайн-Тарификация звонков в реальном времени с поддержкой кредитов и абонплат (PostgreSQL/plpgsql, gnu-Radius) 2003, Офлайн-Биллинг телеком-оператора (mod_реrl, PostgreSQL/plpgsql) MVP Другие темы, которыми я занимался на уровне пилотов или подготовки к продакшену\n2008, JAST::Wiki. Система поддержки документации (mod_реrl) 2004, OverSSI. Конфигурируемый через SSI web-интерфейс к БД (mod_реrl, PostgreSQL/plpgsql) 2002, Библиотека построения диаграмм по XML спецификации (Linux, C, libxml, libgd2) Fullstack+admin (июнь 1999 — июль 2002) Фармацевтическая компания \u0026ldquo;Фарма плюс\u0026rdquo;, Краснодар\nWWW-программист, системный администратор\nперевод компании на использование открытого ПО в части работы с интернет (linux, apache, bind, proftpd, iptables, sendmail, dovecot etc) разработка сервиса публикации прайс-листов (HTML::Mason) программирование системы offline-заказов (jаvаsсript, реrl, email) проектирование отказоустойчивого решения для корпоративного сайта (slave frontend - Apache, rsync) построение и администрирование решения для корпоративного доступа в интернет (firewall, email, proxy - Linux) Достижения\nМеня взяли специалистом по Oracle перед покупкой \u0026ldquo;использующей Oracle программы\u0026rdquo;. Я обнаружил и доказал, что покупаемая программа к Oracle отношения не имеет. К моему приходу компания ничего не знала про linux, в процессе мы подняли и сконфили сервера под RedHat, закрыв текущий функционал и добавив новый, а потом еще и взяли админа для них. Написал программу на js, чтобы офлайн быстро (из 2К позиций) собрать заказ и отправить его по email Помог КубаньЭлектроСвязи (Ростелекому) прикрутить к их ISDN плату расширения к Motorola Vanguard 360, которую я взял у вендора без оплаты до успешного применения, в итоге оплатили. Проекты Проекты, которые находились в продакшене более года\n2001, Сервис публикации прайс-листов для региональной газеты (www.price.kuban.su) и фармацевтической компании (www.farma.ru) (mod_реrl, HTML::Mason, PostgreSQL) Программист (август 1994 — июнь 1999) Акционерный банк \u0026ldquo;КубаньБанк\u0026rdquo;, Краснодар\nГлавный специалист отдела программирования АСУ\nРазработка систем поддержки принятия решений для отделов планирования (головной банк и филиалы):\nпроектирование и разработка решений по анализу деятельности банка (Oracle, Crystal Reports) подготовка балансовой отчетности для РКЦ (Paradox) расчет аналитических показателей по пользовательским параметрам (Paradox) агрегация данных филиалов (результаты расчетов и журналы ошибок) (Paradox) Личные достижения\nМоя программа расчета нормативов сразу была лучше версии штатных сотрудников и потом однажды оказалась лучше версии ЦБ Я придумал (и реализовал) добавление трейсов ошибок в пересылаемые из филиалов нормативы, чтобы знать, почему в каком-то филиале моя программа сбоит Применил университетский опыт в С для реализации показа интерактивных диаграмм по данным нормативов Проекты 1999, Система учета движения товаров и услуг для сервисной фирмы (Delphi, Crystal Reports, MS Access) Образование Высшее, 1989-1994, Кубанский Госуниверситет, Краснодар. Факультет прикладной математики\nХобби Актуальные проекты\ndopos - Настройка и развёртывание docker-приложений на выделенном сервере (docker, make, golang, gitea, traefik, postgresql) pgmig - Пакетная загрузка SQL (миграции) в БД (golang, postgresql) procapi - API к хранимым процедурам Postgresql (golang) apisite - SQL API для шаблонов и внешних клиентов на основе procapi и apitpl (golang) Прошлые проекты, которыми я занимался на уровне пилотов или подготовки к продакшену\n2021, mqbridge. Сервис обмена сообщениями между Postgresql и NATS 2020, logbase. Сервис для размещения в БД Postgresql структурированных журнальных файлов (golang, postgresql) 2020, siwemon. Пример построения графиков мониторинга по данным webtail 2019, fiwes. Сервис формирования превью изображений 2018, poma. Makefile для загрузки SQL в БД (make, postgresql) 2017, metricinc. Сервис сбора инкрементных метрик (golang, grpc, boltdb, docker) 2017, webtail. Сервис доступа к изменяемым файлам через websocket Языки Русский — родной Английский — читаю профессиональную литературу Увлечения велосипед стендовая стрельба (скит) Личные данные 23.10.1972 email github.com/LeKovr Версия для печати career.habr.com http://lekovr.github.io/cv/\n","description":"Алексей Коврижкин. Резюме","id":22,"section":"","tags":null,"title":"Алексей Коврижкин","uri":"https://lekovr.github.io/cv/"}]